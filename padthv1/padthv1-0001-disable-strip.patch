From 0e83413f9919757dcfdfb3e750e70c419aae52d5 Mon Sep 17 00:00:00 2001
From: Yann Collette <ycollette.nospam@free.fr>
Date: Wed, 26 Jan 2022 21:59:05 +0100
Subject: [PATCH] disable strip

---
 src/CMakeLists.txt | 12 ------------
 1 file changed, 12 deletions(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 176b775..aa20526 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -172,10 +172,6 @@ if (CONFIG_LV2)
   target_link_directories (${PROJECT_NAME}_lv2 PRIVATE ${LV2_LIBRARY_DIRS})
   target_link_libraries (${PROJECT_NAME}_lv2 PRIVATE ${LV2_LIBRARIES})
   if (UNIX AND NOT APPLE)
-    if (NOT CONFIG_DEBUG)
-      add_custom_command(TARGET ${PROJECT_NAME}_lv2  POST_BUILD
-        COMMAND strip lib${PROJECT_NAME}_lv2.so)
-    endif ()
     if (CONFIG_PREFIX MATCHES $ENV{HOME})
       set (CONFIG_LV2DIR ${CONFIG_PREFIX}/.lv2)
     else ()
@@ -191,10 +187,6 @@ if (CONFIG_LV2)
   endif ()
   if (WIN32)
     target_link_options (${PROJECT_NAME}_lv2 PRIVATE -static-libgcc -static-libstdc++)
-    if (NOT CONFIG_DEBUG)
-      add_custom_command(TARGET ${PROJECT_NAME}_lv2  POST_BUILD
-        COMMAND strip lib${PROJECT_NAME}_lv2.dll)
-    endif ()
     set (CONFIG_LV2DIR ${CONFIG_WINDOWS_LV2_PATH})
     install (FILES ${CMAKE_CURRENT_BINARY_DIR}/lib${PROJECT_NAME}_lv2.dll
       RENAME ${PROJECT_NAME}.dll
@@ -221,10 +213,6 @@ if (CONFIG_JACK)
     target_link_libraries (${PROJECT_NAME}_jack PRIVATE PkgConfig::LIBLO)
   endif ()
   if (UNIX AND NOT APPLE)
-    if (NOT CONFIG_DEBUG)
-      add_custom_command(TARGET ${PROJECT_NAME}_jack POST_BUILD
-        COMMAND strip ${PROJECT_NAME}_jack)
-    endif ()
     install (TARGETS ${PROJECT_NAME}_jack RUNTIME
       DESTINATION ${CMAKE_INSTALL_BINDIR})
     install (FILES org.rncbc.${PROJECT_NAME}.desktop
-- 
2.31.1

